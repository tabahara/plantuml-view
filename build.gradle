apply plugin: 'java'

sourceCompatibility='1.7'
targetCompatibility='1.7'

task wrapper(type:Wrapper){ 
  gradleVersion="2.2"
}

repositories { 
  flatDir(dirs: file('./libs'))
}

dependencies { 
  compile 'batik:batik-all:1.7',
  "plantuml:plantuml:8012",
  "w3c:w3c:",
  "w3c:w3c:",
  "w3c-css:w3c-css:",
  "w3c-dom:w3c-dom:",
  "org.w3c.css.sac:org.w3c.css.sac:1.3.0"
}

jar {
  manifest {
    attributes("Main-Class" : "com.quinmantha.tool.Main");
  }
}

version="1.0"
task fatJar(type: Jar){
  manifest {
    attributes "Main-Class" : "com.quinmantha.tool.Main"
  }
  baseName = project.name + "-all"
  from { configurations.compile.collect {it.isDirectory() ? it : zipTree(it) }} with jar
}

String getHomeDir() { 
  return System.getProperty("user.home")
}
String dest = getHomeDir() + '/bin'

task install(type:Copy, dependsOn:'fatJar'){
  from 'build/libs/plantuml-view-all-1.0.jar'
  into dest
}

